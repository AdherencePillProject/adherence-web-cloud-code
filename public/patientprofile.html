<html ng-app="adherence-partials">
    <head>
        <title>My Profile</title>

        <!-- Adding Bootstrap CSS -->
        <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">

        <!-- Adding Font Awesome -->        
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

        <!-- Adding Fonts -->
        <link href='https://fonts.googleapis.com/css?family=PT+Sans' rel='stylesheet' type='text/css'>

        <!-- Adding jQuery and jQuery UI -->
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
        <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>

        <!-- Adding Bootstrap JS -->
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
        
        <!-- Adding Parse JS -->
        <script src="http://www.parsecdn.com/js/parse-1.6.7.min.js"></script>

        <!--Add Angular-->
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.5/angular.min.js"></script>

        <!--Add Angular Directives-->
        <script src="/js/angular-app.js"></script>

        <!-- Adding Custom CSS -->
        <link rel="stylesheet" href="Patient_prescription/css/my.css" media="screen" title="no title" charset="utf-8">
        <link rel="stylesheet" type="text/less" href="css/home.less">     

        <!-- Adding Custom JS -->
        <script type="text/javascript" src="js/home.js"></script>
    </head>
    <body>

        <div ng-controller='NavController as tab' ng-include src="'/partials/navbar/navbar.html'"></div>

        <div id="new-header"></div>
        <script>$("#new-header").load("header.html");</script>

        <div class="dashboard">
            <span class='title-name'>
            <i class="fa fa-heartbeat"></i> My Profile
            </span>
        </div>

        <br>

        <div class="container my-panel" id="backbox">
            <div id="topbox">
                <div class="circular"></div>
                <br>
                <h3 id="patName"></h3>
                <h3 id="patEmail"></h3>
                <h3 id="patAge"></h3>
                <h3 id="patSex"></h3>
                <br>
                <button class='btn btn-default' id="upload"><label for="PhotoUpload">Upload Photo</label></button> <br>
                <input style="visibility: hidden" type="file" id="PhotoUpload" name="PhotoUpload"> 
            </div>

            <div id="appointments">
                <h2><i class="fa fa-plus-square"></i>  Appointments</h2>
                <table>
                    <tr><td class="patientt"><i class="fa fa-user-md"></i> Doctor</td><td class="patientt"><i class="fa fa-hospital-o"></i> Clinic</td><td class="patientt">Last Appointment</td><td class="patientt">Next Appointment</td></tr>
                    <tr><td class="patientt">name</td><td class="patientt">Clinic</td><td class="patientt">date</td><td class="patientt">date</td></tr>
                    <tr><td class="patientt">name</td><td class="patientt">Clinic</td><td class="patientt">date</td><td class="patientt">date</td></tr>
                    <tr><td class="patientt">name</td><td class="patientt">Clinic</td><td class="patientt">date</td><td class="patientt">date</td></tr>
                    <tr><td class="patientt">name</td><td class="patientt">Clinic</td><td class="patientt">date</td><td class="patientt">date</td></tr>
                    <tr><td class="patientt">name</td><td class="patientt">Clinic</td><td class="patientt">date</td><td class="patientt">date</td></tr>
                </table>
            </div>
        </div>

        <script type="text/javascript">
            Parse.initialize("BDo39lSOtPuBwDfq0EBDgIjTzztIQE38Fuk03EcR", "ox76Y4RxB06A69JWAleRHSercHKomN2FVu61dfu3");
            $( document ).ready(function() {
                Parse.User.current().fetch().then(function (user) {
                    $("#patName").html("Name: " + user.get("firstname") + " " + user.get("lastname"));
                    $("#patEmail").html("Email: " + user.get("email"));
                    $("#patAge").html("Age: " + user.get("age"));
                    $("#patSex").html("Sex: " + user.get("gender"));
                })
            });
             $("#PhotoUpload").change(function() {
                console.log("changed");
                var fileUploadControl = $("#PhotoUpload")[0];
                if (fileUploadControl.files.length > 0) {
                  var file = fileUploadControl.files[0];
                  var name = "photo.jpg";
                  var parseFile = new Parse.File(name, file);
                  Parse.User.current().fetch().then(function (user) {
                        user.set("photo", parseFile);
                        user.save();
                  })
                }
             });
            
        </script>
    </body>
</html>